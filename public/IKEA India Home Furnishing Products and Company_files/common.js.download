$(function () {
    var $ = jQuery.noConflict();
    $(window).on('load', function () {
        $('.h100').each(function () {
            $(this).css('height', $(this).closest('.parent').height());
        });
        $(".main_carousel .item:first-child").addClass("animate");
    });
    $(document).ready(function () {
        if ($('.owl-carousel').length) {
            $(".owl-carousel").owlCarousel({
                items: 2,
                margin: 30,
                nav: true,
                autoplay: false,
                autoplayTimeout: 2000,
                loop: true,
                responsiveClass: true,
                responsive: {
                    0: {
                        items: 1,
                        nav: true
                    },
                    600: {
                        items: 2
                    },
                    1000: {
                        items: 2
                    }
                }
            });
        }
        if ($('.newsroom').length) {
            $("[data-fancybox]").fancybox({});
        }
        $('.cookies-inner .close').on('click', function () {
            $(this).closest('.cookies-wrapper').slideUp();
        });
        $('ul.nav li.dropdown').hover(function () {
            $(this).find('.dropdown-menu').stop(true, true).fadeIn(300).addClass('open');
        }, function () {
            $(this).find('.dropdown-menu').stop(true, true).fadeOut(300).removeClass('open');
        });
        $(window).scroll(function () {
            if ($(document).scrollTop() >= 100) {
                $('.navbar-default').addClass('shrink');
            } else {
                $('.navbar-default').removeClass('shrink');
            }
        });
        if ($('#countdown').length) {
            var countDownDate = new Date("Nov 22, 2017 15:00:00").getTime();
            var x = setInterval(function () {
                var now = new Date().getTime();
                var distance = countDownDate - now;
                var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                document.getElementById("countdown").innerHTML = "<div class=box>" + days + "<span>Days</span></div><div class=box>" + hours + "<span>Hours</span></div><div class=box>" + minutes + "<span>Minutes</span></div><div class=box>" + seconds + "<span>Seconds</span></div>";
                if (distance < 0) {
                    clearInterval(x);
                    document.getElementById("countdown").innerHTML = "EXPIRED";
                }
            }, 1000);
        }(function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o), m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-62578716-1', 'auto');
        ga('send', 'pageview');
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.9&appId=1652223981738950";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
        jQuery("#events_workshops").click(function () {
            jQuery(this).addClass('active');
            jQuery('html, body').animate({
                scrollTop: jQuery("#event-and-workshop").offset().top + 50
            }, 1000);
        });
        $('#vdoPlay').click(function (e) {
            document.getElementById('playctrl').play();
            $('.imgPart').fadeOut('slow', function () {
                $('.videopart').fadeIn('slow');
            });
        });
        $('#anchorToScroll').on('click', function (e) {
            e.preventDefault();
            $('html, body').animate({
                scrollTop: $($(this).attr('href')).offset().top - 70
            }, 800, 'linear');
        });
        $('#myCarousel').carousel({
            interval: 10000
        })

        $('.fdi-Carousel .item').each(function () {
            var next = $(this).next();
            if (!next.length) {
                next = $(this).siblings(':first');
            }
            next.children(':first-child').clone().appendTo($(this));
            if (next.next().length > 0) {
                next.next().children(':first-child').clone().appendTo($(this));
            } else {
                $(this).siblings(':first').children(':first-child').clone().appendTo($(this));
            }
        });
        $('.collapse').on('shown.bs.collapse', function () {
            $(this).parent().find(".glyphicon-plus").removeClass("glyphicon-plus").addClass("glyphicon-minus");
        }).on('hidden.bs.collapse', function () {
            $(this).parent().find(".glyphicon-minus").removeClass("glyphicon-minus").addClass("glyphicon-plus");
        });
        jQuery('.test').on('click', function (event) {
            event.preventDefault();
            jQuery('.cd-panel').addClass('is-visible');
            var html = jQuery(this).siblings('.hide_me').html();
            jQuery('.section-modal').html(html);
            jQuery('.main-content').addClass('space-right');
            jQuery('body').addClass('space-top');
        });
        $('.cd-panel').on('click', function (event) {
            if ($(event.target).is('.cd-panel') || $(event.target).is('.cd-panel-close1')) {
                $('.cd-panel').removeClass('is-visible');
                $('.main-content').removeClass('space-right');
                $('body').removeClass('space-top');
                event.preventDefault();
            }
        });
        if ($('.back-to-top').length) {
            var scrollTrigger = 100,
                backToTop = function () {
                    var scrollTop = $(window).scrollTop();
                    if (scrollTop > scrollTrigger) {
                        $('.back-to-top').addClass('show');
                    } else {
                        $('.back-to-top').removeClass('show');
                    }
                };
            backToTop();
            $(window).on('scroll', function () {
                backToTop();
            });
            $('.back-to-top').on('click', function (e) {
                e.preventDefault();
                $('html,body').animate({
                    scrollTop: 0
                }, 700);
            });
        }
        $('.back-to-top').css('right', $('.bottom').offset().left);
    });
});