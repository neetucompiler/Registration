var date=new Date();var get_date="2017-11-22";var get_time=null;jQuery(document).ready(function(){if(jQuery('.owl-carousel').length){jQuery('.events-carousel').owlCarousel({stagePadding:100,margin:50,nav:true,loop:true,dots:false,responsive:{0:{items:1,stagePadding:0,margin:0,},600:{stagePadding:50,margin:20,items:1,},1000:{items:2}}})
jQuery(".owl-prev").html('<span class="chevron-left"></span>');jQuery(".owl-next").html('<span class="chevron-right"></span>');jQuery('.slot-carousel').owlCarousel({margin:0,nav:true,dots:false,mouseDrag:false,responsive:{0:{items:1,mouseDrag:true},479:{items:3,mouseDrag:true},767:{items:5,mouseDrag:true},1000:{items:8}}})}});var date=new Date();var daysOfYear=[];for(var d=new Date(2017,10,22);d<=new Date(2017,11,31);d.setDate(d.getDate()+1)){daysOfYear.push(new Date(d));}var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];var days=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];for(i=0;i<daysOfYear.length;i++){var active='';var dates=new Date(daysOfYear[i]);var check_date=convert_date(dates);if(i==0){active="selected active";};$("#dynamic-carousel").append("<div class='item' ><div  rel='"+check_date+"' class='item-inner get-date item-inner-remove-class "+active+" '><div class='book-date'><small>"+dates.getDate()+"</small><span>"+days[dates.getDay()]+"</span><span>"+monthNames[dates.getMonth()]+", "+dates.getDate()+"</span></div></div></div>");}function sameDay(d1,d2){return d1.getFullYear()===d2.getFullYear()&&d1.getMonth()===d2.getMonth()&&d1.getDate()===d2.getDate();}function convert_date(dates){var month=dates.getMonth()+1;var day=dates.getDate();var year=dates.getFullYear();return newdate=year+"-"+month+"-"+day;}set_slot(get_date);function set_slot(date){var time_array=['12:30 pm to 01:00 pm','01:00 pm to 01:30 pm','01:30 pm to 02:00 pm','02:00 pm to 02:30 pm','02:30 pm to 03:00 pm','02:30 pm to 03:00 pm','03:00 pm to 03:30 pm','03:30 pm to 04:00 pm','04:00 pm to 04:30 pm','04:30 pm to 05:00 pm','05:00 pm to 05:30 pm','05:30 pm to 06:00 pm','06:00 pm to 06:30 pm','06:30 pm to 07:00 pm','07:00 pm to 07:30 pm','07:30 pm to 08:00 pm','08:00 pm to 08:30 pm'];var html='';jQuery("#dynamic-time-slot-div").empty();for(i=0;i<time_array.length;i++){if(date=="2017-11-22"){if(i==0||i==1||i==2||i==3||i==4||i==5){html+="<div class='single-slot disabled' time_slot='"+time_array[i]+"'><p>"+time_array[i]+"</p></div>";}else{html+="<div class='single-slot get_time_slot' time_slot='"+time_array[i]+"'><p>"+time_array[i]+"</p></div>";}}else{html+="<div class='single-slot get_time_slot' time_slot='"+time_array[i]+"'><p>"+time_array[i]+"</p></div>";}}html+="<div class='book-btn'><button class='common-btn book-now' >Book Now <img alt='btn-arrow' src='images/arrow.svg'></button></div>";jQuery("#dynamic-time-slot-div").append(html);jQuery(".get_time_slot").on('click',function(){jQuery(".get_time_slot").removeClass("selected active");jQuery(this).addClass("selected active");get_time=jQuery(this).attr("time_slot");});jQuery(".book-now").on('click',function(){if(get_date==null){alert('Please select date.');return false;}if(get_time==null){alert('Please time slot.');return false;}var str='You have booked a slot on <br>'+convert_date_formate(get_date).getDate()+'th  '+monthNames[convert_date_formate(get_date).getMonth()]+', '+days[convert_date_formate(get_date).getDay()]+' from '+get_time;var msg="Slot Booked!";jQuery("#slot-head").html(msg);jQuery("#popup-text").html(str);var token=Math.floor(Math.random()*900)+54356557;jQuery("#random-number").text(token);book_my_slot(get_date,get_time,token);});}jQuery(document).ready(function($){$(".get-date").on('click',function(){$(".item-inner-remove-class").removeClass("selected active");$(this).addClass("selected active");get_date=$(this).attr("rel");set_slot(get_date);$(".time-slot-div").fadeOut();$(".time-slot-div").fadeIn();});$(".close-popup").on('click',function(){$(".get_time_slot").removeClass("selected active");get_time=null;});});function book_my_slot(get_date,get_time,token){jQuery.getJSON('http://ipinfo.io',function(data){var params={"host":data.ip,"date":get_date,"time":get_time,"token":token}
jQuery.ajax({type:'POST',url:base_url+"book_my_slot",data:params,dataType:"json",headers:{'X-API-KEY':'edq7A6x99YfceKFWS7Sw2Yi1f5DMy9n6','Content-Type':'application/x-www-form-urlencoded'},success:function(response){var obj=response.status;if(obj==0){var str='You have booked a slot on <br>'+convert_date_formate(response.jsonData.date).getDate()+'th  '+monthNames[convert_date_formate(response.jsonData.date).getMonth()]+', '+days[convert_date_formate(response.jsonData.date).getDay()]+' from '+response.jsonData.time;var msg=response.message;jQuery("#slot-head").html(msg);jQuery("#popup-text").html(str);jQuery("#random-number").text(response.jsonData.token);}jQuery('#slot_modal').modal('show');},error:function(e){console.log(e);}});});}function convert_date_formate(date){var date_str=new Date(date);return date_str;}$("#slot_modal").modal({show:false,backdrop:'static'});if(jQuery('.responsive-tabs').length){jQuery('.responsive-tabs').responsiveTabs({accordionOn:['xs','sm']});}